# git / github.com


## Création du premier projet

1. On commence par créer un dépôt vide sur github.com (Ex: Projet1).
2. GitHub nous donne l'addresse du dépôt. Exemple :

        https://github.com/boissonnfive/Projet1.git

3. On revient en local sur son ordinateur.
4. On se place dans le dossier de son projet.
5. On lance git dans un terminal dans ce dossier.
6. On tape la commande :

        $ git init

7. On ajoute tous les fichiers/dossiers du projet en tapant (pour chaque fichier) :

        $ git add fichier

    Ou (pour tous les fichiers d'un coup) :

        $ git add .

8. On fait un commit :

        $ git commit -m "Première consigne"

9. On définit l'adresse du serveur de dépôt (avec l'adresse du 2):

        $ git remote add origin https://github.com/boissonnfive/Projet1.git

10. On remonte les modifications sur le dépôt en tapant :

        $ git push origin master

11. À la prochaine modification en local sur un fichier, on tapera :

        $ git add .
        $ git commit -m "ce qu on vient de modifier"

12. Et on exportera les modifications sur le dépôt distant en tapant :

        $ git push origin master

13. Si on veut supprimer le dernier commit (avant d'avoir fait un push) :
[ATTENTION : Les modifications du dernier commit sont supprimées du fichier!]
(Dans le log, le dernier commit n'apparaît plus)

        $ git reset --hard HEAD~1

14. À tout moment, on peut savoir où on en est par la commande :

        $ git status

15. A tout moment, on peut savoir tout ce qui a été fait par la commande :

        $ git log

16. Si on a travaillé à partir d'un autre ordinateur (ou qu'une autre personne a travaillé sur le projet) et que l'on veut récupérer les modifications :

        $ git pull origin master

17. Si on veut modifier quelque chose sur un projet, il vaut mieux travailler sur une branche :

        $ git branch ajout
        $ git checkout ajout

18. Pour faire des modifications, c'est toujours le même processus : add + commit
19. Pour rapatrier les modifications sur la branche principale

        $ git checkout master
        $ git merge ajout

20. On efface la branche inutile :

        $ git branch -d ajout


## Poser une étiquette (tag) ##

Donne la liste des étiquettes déposées sur le projet:

    $ git tag

ou

    $ git tag --list

Pose une étiquette sur le projet:

    $ git tag -a 'v0.0.1' -m 'première version du logiciel'

ou

    $ git tag v0.0.1

Pose l'étiquette sur le dépôt partagé (après avoir fait un git push origin master) :

    $ git push origin v0.0.1

ou

    $ git push origin --tags



## Configurer git ##

    $ git config --global user.name "boissonnfive"
    $ git config --global user.email boissonnfive@gmail.com
    $ git config --list
    ...
    user.name=boissonnfive
    user.email=boissonnfive@gmail.com
    ...


### Erreur 403 lors d'un push ###

    git push origin master
    remote: Permission to boissonnfive/Mon_GIT.git denied to expansia.
    fatal: unable to access 'https://github.com/boissonnfive/Mon_GIT.git/': The requested URL returned error: 403

Il faut modifier le fichier ./git/config :

    …
    [remote "origin"]
    url = https://github.com/boissonnfive/Mon_GIT.git
    …

devient :

    …
    [remote "origin"]
    url = https://boissonnfive@github.com/boissonnfive/Mon_GIT.git
    …


## Utiliser pro de Tristan Hume

[Dépôt GitHub](https://github.com/trishume/pro)

Ce petit logiciel ruby sert à lister les dépôts Git qui ont des modifications en cours, grâce à la commande :

    pro status

Ce logiciel va regarder dans les répertoires enregistrés dans son fichier **~/.proBase**. Voici le mien:

    /Users/bruno/Desktop/GitHub
    /Users/bruno/Library/Application Support/Sublime Text 3/Packages/User

Pour aller dans le répertoire qui contient une modif, on fait :

    pd partieDuNomDuRépertoire # ex : pd app (pour AppleScript)

Enfin, on peut appliquer une commande à tous les dépôts en même temps avec la commande :

    pro run commande


## Quelques commandes git supplémentaires

### Relocaliser le dépôt distant :

    $ git remote -v # pour lister le dépôt distant
    origin https://github.com/boissonnfive/Projet1.git (fetch)
    origin https://github.com/boissonnfive/Projet1.git (push)
    $ git remote set-url origin https://github.com/boissonnfive/Nouveau-Projet.git
    $ git remote -v
    origin https://github.com/boissonnfive/Nouveau-Projet.git (fetch)
    origin https://github.com/boissonnfive/Nouveau-Projet.git (push)


### Retrouver les modifications faites dans les fichiers

**En cours et non mis en attente (staged)**

    $ git diff (no parameters)
    # Print out differences between your working directory and the index.

**Entre les fichiers mis en attente et la dernière consigne (commit)**

    $ git diff --cached
    # Print out differences between the index and HEAD (current commit).

**Entre les fichiers modifiés et non mis en attente et la dernière consigne**

    $ git diff HEAD
    # Print out differences between your working directory and the HEAD.

**Faire des comparaisons de fichiers UTF-16**

    $ git config --global diff.tool vimdiff      # or merge.tool to get merging too!
    $ git difftool commit1 commit2


## Différence entre checkout et reset

Un checkout c'est pour faire sortir du dépôt une certaine version/commit (mais quand on n'a pas mis de fichiers en attente — git add). Le checkout va écraser tous les fichiers du répertoire de travail avec ce qu'il y a dans le dépôt.

Par contre, si on a mis des fichiers en attente (staging avec git add), il faut utiliser `git reset` pour remettre à zéro la zone d'attente.

    $ git reset --hard‌
    # Pour effacer tous les fichiers indexés mais pas validés (commit => donc pas dans le dépôt) : on remet à zéro la zone d'attente et on efface les modifications (--hard)

    $ git reset HEAD <file>..." to unstage
    # Pour sortir un fichier de l'index (de la zone d'attente)

    $ git reset master
    Unstaged changes after reset:
    M   fichier2.txt
    # Le commit de la modification du fichier fichier2.txt a été supprimé (voir git log), mais la modification est encore dans le fichier car on n'a pas fait de `--hard` ni de checkout. Git a supprimé tous les commit supérieurs au dernier commit de la branche master. Mais les modifications sont restées (fichiers créés ou modifs dans les fichiers)


## Liens sur git ##

- [git the simple guide](http://rogerdudler.github.io/git-guide/)
- [Maîtriser Git en 28 minutes et 32 secondes](https://www.youtube.com/watch?v=5IcYILdejs8)


## github.com

### Hello World github

<https://guides.github.com/activities/hello-world/>

### Rapatrier un dépôt local sur GitHub (ou faire un fork à la main)

1. Créez un dépôt sur GitHub **sans ajouter de fichier README.md**.
2. Récupérez l’adresse du dépôt (ex :https://github.com/boissonnfive/LWC_travel-site.git)
3. Ajoutez l’adresse du dépôt distant :
 
        git remote add origin https://github.com/boissonnfive/LWC_travel-site.git

4. Ou modifiez l’adresse :

        git remote set-url origin https://github.com/boissonnfive/LWC_travel-site.git

5. Exportez le dépôt local sur GitHub :
 
        git push origin master


### Supprimer un dépôt sur GitHub ###

<https://github.com/YOUR-USERNAME/YOUR-REPOSITORY/settings>

1. Aller dans le dépôt à supprimer
2. Aller dans le menu settings (roue dentée)
3. Sous la bannière « Danger Zone », cliquer sur « Delete this repository »
4. Lire les avertissements
5. Pour vérifier que vous effacer le bon dépôt, tapez le nom du dépôt que vous voulez supprimer
6. Cliquer sur « Je comprends les conséquences, effacez ce dépôt »


### Compte boisonnfive

- identifiant  : boissonnfive
- mail         : boissonnfive@gmail.com

### Compte expansia

- identifiant  : expansia
- mail         : stagiaire_etn.ara@pcas.com

### Compte binfoservice

- identifiant  : binfoservice
- mail         : binfoservice@gmail.com

---

## Git sur Windows

## Configuration ##

- version : 2.5.3
- architecture : 32 bits
- "Use git from Git Bash only"
- "Check-out Windows style, commit Unix-style line endings"
- "Use MinTTY (the default terminal of MSys2)"
- "Disable file system caching"

## Notes ##

Puisque Git Bash fonctionne à partir de MSys2, il inclut :

- Une documentation : C:\Program Files\Git\mingw32\share\doc\git-doc\index.html
- Bash
- Perl 5.0
- Vim 7.4

---

## Git par Marc

### Pourquoi Git ? ###

- Tracer par fonctionnalité plutôt que par fichier (commit)
- Travailler déconnecté

### Les consignes pour travailler avec Git ###

- la branche principale pour le projet qui tourne + les branches pour développer (git branch)
- => 1 compte Entreprise (organisation) + des comptes développeurs
- Ne pas autoriser les dev à rappatrier sur la branche principale => Notion de "Release master/Responsable intégration" à qui on doit faire une pull request
- git log,  git status, git rebase
- lire l'API rest pour comprendre mieux le fonctionnement (<https://developer.github.com/v3/>)
- Livre Progit de Scott Chacon

### Procédure Git avancée ###

1. On crée un compte "organisation"
2. On crée un compte "release master" (seul à avoir les droits sur le dépôt)
3. Chaque dévéloppeur se créer un dépôt
4. Les développeurs doivent faire une copie du dépôt principal (fork) pour travailler sur le projet.
5. Ils doivent faire un "pull" pour travailler en local.
6. Ils doivent faire un "push" pour rappatrier sur leur serveur.
7. Les dévéloppeurs devront faire une "pull request" pour demander au "release master" d'intégrer leurs modifs
8. Il y a désynchronisation des dépôts : dépôts dévéloppeur local/serveur + dépôt dévéloppeur/dépôt organisation.
9. On peut faire des "git reset" pour supprimer l'historique des commit, pour n'avoir qu'un seul commit lors de la "pull request".

---

## Glossaire ##

- **Repository** : Dépôt
- **Check in** : Dépôt
- **To check in** : Déposer, mettre en dépôt, faire un dépôt.
- **Check out** : Retrait
- **To check out** : Retirer, récupérer (parfois rapatrier est une bonne alternative)
- **To commit** : Consigner
- **Stage area** : Zone d'attente
- **To stage** : Mettre en attente
- **Change** : Modification (à préférer à changement)
- **stash** : Remise
- **To stash** : Remiser
- **Checksum** : Somme de contrôle
- **Hash** : Empreinte (Alternatives: signature, hachage (correct mais à éviter))
- **Workflow** : Processus (Alternative: scénario)
- **Snapshot** : Instantané
- **Diff** : Diff
- **To track** : Suivre
- **untracked** : non-suivi
- **unmodified** : non-modifié
- **To update** : Mettre à jour
